<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<th:block th:fragment="recursiveList(projectList, currentDepth)">
    <th:block th:unless="${projectList.isEmpty()}">
        <th:block th:each="project : ${projectList}">
            <details>
                <summary role="button" class="outline" th:style="'margin-left: ' + (${currentDepth} * 20) + 'px;'">
                    <a th:href="@{/projects/{projectId}(projectId=${project.projectId})}"
                       th:text="${project.title}">Project Title</a>
                </summary>

                <table>
                    <thead>
                    <tr>
                        <th>Opgave</th>
                        <th>Arbejdsdage</th>
                        <th>Startdato</th>
                        <th>Slutdato</th>
                        <th>Estimerede timer</th>
                        <th>Faktiske timer</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <th:block th:replace="~{fragments/task_table :: recursiveTableRows(taskList=${project.tasks}, currentDepth=0)}"></th:block>
                    </tbody>
                </table>
            </details>
            <th:block th:insert="~{this :: recursiveList(projectList=${project.subProjects}, currentDepth=${currentDepth + 1})}"></th:block>
        </th:block>
    </th:block>
</th:block>
</body>
</html>